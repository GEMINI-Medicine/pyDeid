<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Installation &#8212; pyDeid v0.0.4 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=039e1c02" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=0fc64e82"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API Reference" href="api/index.html" />
    <link rel="prev" title="pyDeid" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this heading">¶</a></h1>
<section id="pydeid">
<h2><code class="docutils literal notranslate"><span class="pre">PyDeid</span></code><a class="headerlink" href="#pydeid" title="Permalink to this heading">¶</a></h2>
<section id="objective">
<h3>1 Objective<a class="headerlink" href="#objective" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">PyDeid</span></code> is a Python-based refactor of the <a class="reference external" href="https://physionet.org/content/deid/1.1/">Physionet Perl-based De-identification Software</a>, which uses regular expressions and lookup dictionaries to identify and replace PHI in free text.</p>
<p>The purpose was to create a faster, and easier to use process to de-identify large volumes of (large) clinical notes. <code class="docutils literal notranslate"><span class="pre">PyDeid</span></code> is up to 5.4x faster than the perl-based software, and requires no pre or post processing. Additional enhancements include the ability to re-identify text, supply custom patterns, and supply custom doctor and patient namelists without having to save them to persistent storage.</p>
</section>
<section id="local-installation-and-setup">
<h3>2 Local Installation and Setup<a class="headerlink" href="#local-installation-and-setup" title="Permalink to this heading">¶</a></h3>
<p>If you have downloaded (and unzipped) this package to a local folder <code class="docutils literal notranslate"><span class="pre">/path/to/package/</span></code> simply install via <code class="docutils literal notranslate"><span class="pre">pip3</span> <span class="pre">install</span> <span class="pre">--user</span> <span class="pre">/path/to/package/</span></code>.</p>
<p>Note that if you are connected through VPN to your institution’s network you may need to run the command with the following options: <code class="docutils literal notranslate"><span class="pre">pip3</span> <span class="pre">install</span> <span class="pre">--trusted-host</span> <span class="pre">pypi.org</span> <span class="pre">--trusted-host</span> <span class="pre">pypi.python.org</span> <span class="pre">--trusted-host</span> <span class="pre">files.pythonhosted.org</span> <span class="pre">--user</span> <span class="pre">/path/to/package/</span></code>.</p>
<p>Dependencies can be installed with <code class="docutils literal notranslate"><span class="pre">pip3</span> <span class="pre">install</span> <span class="pre">--trusted-host</span> <span class="pre">pypi.org</span> <span class="pre">--trusted-host</span> <span class="pre">pypi.python.org</span> <span class="pre">--trusted-host</span> <span class="pre">files.pythonhosted.org</span> <span class="pre">-r</span> <span class="pre">/path/to/requirements.txt/</span></code>.</p>
<blockquote>
<div><p><em>Note</em>: You may encounter a deprecation warning about building local packages in place without first copying to a temporary directory in a future version of <code class="docutils literal notranslate"><span class="pre">pip</span></code>. Note that <code class="docutils literal notranslate"><span class="pre">pyDeid</span></code> has been tested with this change and the installation will continue to work when this behaviour becomes the default.</p>
</div></blockquote>
<p>To now import from this package, you may need to add the install location (found via <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">show</span> <span class="pre">pyDeid</span></code>) to your <code class="docutils literal notranslate"><span class="pre">$PYTHONPATH</span></code> so <code class="docutils literal notranslate"><span class="pre">Python</span></code> knows where to look for it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;/path/from/pip_show_pydeid/&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Test your installation by running the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyDeid</span> <span class="kn">import</span> <span class="n">deid_string</span>
<span class="n">deid_string</span><span class="p">(</span><span class="s1">&#39;Justin Bieber was born on March 1st, 1994.&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="de-identification-process">
<h3>4 De-identification Process<a class="headerlink" href="#de-identification-process" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">PyDeid</span></code> only requires that the free text data be stored in a CSV file with named column headers.</p>
<p>Specifying a column of encounter IDs (and optionally note IDs) with <code class="docutils literal notranslate"><span class="pre">encounter_id_varname</span></code> and <code class="docutils literal notranslate"><span class="pre">note_id_varname</span></code> respectively is relevant in only to assign the found PHI to a particular encounter and note identifier for further analysis. <code class="docutils literal notranslate"><span class="pre">encounter_id_varname</span></code> is required only when <code class="docutils literal notranslate"><span class="pre">phi_output_file_type</span></code> is <code class="docutils literal notranslate"><span class="pre">json</span></code>.</p>
<p>There may be multiple columns containing free text, but <code class="docutils literal notranslate"><span class="pre">PyDeid</span></code> will only de-identify a single column at a time. In order to de-identify multiple columns of text, make multiple passes of the same file with <code class="docutils literal notranslate"><span class="pre">PyDeid</span></code>.</p>
<p>To de-identify a file with default settings, simply do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>from pyDeid import pyDeid

pyDeid(
    original_file = ‘test.csv’,
    note_varname = ‘note_text’,
    encounter_id_varname = ‘genc_id’,
    note_id_varname = &#39;note_id&#39;
)
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">test.csv</span></code> may look like this (and is provided under the <code class="docutils literal notranslate"><span class="pre">tests/</span></code> directory of the package):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">genc_id</span><span class="p">,</span><span class="n">note_id</span><span class="p">,</span><span class="n">note_text</span>
<span class="mi">1</span><span class="p">,</span><span class="n">Record</span> <span class="mi">1</span><span class="p">,</span><span class="n">Justin</span> <span class="n">Bieber</span> <span class="n">was</span> <span class="n">born</span> <span class="n">on</span> <span class="n">March</span> <span class="mi">1</span><span class="n">st</span><span class="p">,</span> <span class="mf">1994.</span>
<span class="mi">2</span><span class="p">,</span><span class="n">Record</span> <span class="mi">2</span><span class="p">,</span><span class="s2">&quot;St.Michael&#39;s hospital is located at 30 Bond St, Toronto, ON, M5B 1W8</span>
<span class="s2">&quot;</span>
<span class="mi">3</span><span class="p">,</span><span class="n">Record</span> <span class="mi">3</span><span class="p">,</span><span class="n">Test</span> <span class="n">MRN</span><span class="p">:</span> <span class="mi">011</span><span class="o">-</span><span class="mi">0111</span>
</pre></div>
</div>
<p>Additional settings are described in the function docstring. A file name for the de-identified csv can be supplied with new_file, or will take the form <code class="docutils literal notranslate"><span class="pre">&lt;original</span> <span class="pre">file</span> <span class="pre">name&gt;__DE-IDENTIFIED.csv</span></code>.</p>
<p>The PHI output can be stored as a <code class="docutils literal notranslate"><span class="pre">json</span></code> or <code class="docutils literal notranslate"><span class="pre">csv</span></code> file (specified by the <code class="docutils literal notranslate"><span class="pre">phi_output_file_type</span></code> parameter), and optionally the file name can be provided using the <code class="docutils literal notranslate"><span class="pre">phi_output_file</span></code> parameter. The <code class="docutils literal notranslate"><span class="pre">json</span></code> data structure is more efficient on space, but is much heavier on memory. The <code class="docutils literal notranslate"><span class="pre">csv</span></code> data structure is inefficient on space but much lighter on memory.</p>
<p>Additionally, there is a <code class="docutils literal notranslate"><span class="pre">verbose</span></code> mode which displays a progress bar and prints speed diagnostics at the end of the run.</p>
<p>One of the main advantages of <code class="docutils literal notranslate"><span class="pre">PyDeid</span></code> over <code class="docutils literal notranslate"><span class="pre">GEMINI</span> <span class="pre">De-id</span> <span class="pre">v2</span></code> is the ability to supply a set of doctor and patient first and last names to be recognized as PHI, without having to store this sensitive information to persistent storage. MLLs can be read into memory from zone1 into a python Set and supplied to <code class="docutils literal notranslate"><span class="pre">PyDeid</span></code> through the <code class="docutils literal notranslate"><span class="pre">custom_dr_first_names</span></code>, <code class="docutils literal notranslate"><span class="pre">custom_dr_last_names</span></code>, <code class="docutils literal notranslate"><span class="pre">custom_patient_first_names</span></code>, and <code class="docutils literal notranslate"><span class="pre">custom_patient_last_names</span></code> parameters for better recall and precision.</p>
<p>Additionally, <code class="docutils literal notranslate"><span class="pre">PyDeid</span></code> allows custom regexes for site-specific PHI to be supplied through keyword arguments. Simply supply a named regex argument to <code class="docutils literal notranslate"><span class="pre">PyDeid</span></code> or <code class="docutils literal notranslate"><span class="pre">deid_string</span></code> like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>deid_string(
    ‘The site-specific identifier at your hospital is NH12345’,
    site_identifier = ‘NH\d{5}’
)
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">deid_string</span></code> is a simplified function to de-identify a single string at a time which can be used for debugging, or written into a custom wrapper if <code class="docutils literal notranslate"><span class="pre">PyDeid</span></code> fails to meet the requirements of the problem. It can optionally be combined with the <code class="docutils literal notranslate"><span class="pre">reid_string</span></code> function which takes the output of <code class="docutils literal notranslate"><span class="pre">deid_string</span></code> and returns the input to <code class="docutils literal notranslate"><span class="pre">deid_string</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">original_string</span> <span class="o">=</span> <span class="s1">&#39;Justin Bieber was born in Stratford on March 1st, 1994.&#39;</span>

<span class="n">phi</span><span class="p">,</span> <span class="n">new_string</span> <span class="o">=</span> <span class="n">deid_string</span><span class="p">(</span><span class="n">original_string</span><span class="p">)</span>
<span class="n">reidentified_string</span> <span class="o">=</span> <span class="n">reid_string</span><span class="p">(</span><span class="n">new_string</span><span class="p">,</span> <span class="n">phi</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">original_string</span> <span class="o">==</span> <span class="n">reidentified_string</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="reporting-issues">
<h3>5 Reporting Issues<a class="headerlink" href="#reporting-issues" title="Permalink to this heading">¶</a></h3>
<p>Please report any bugs or feature requests as issues to the <code class="docutils literal notranslate"><span class="pre">PyDeid</span></code> repository. For any bugs, please supply a minimal reproducible example to guarantee a quicker resolution.</p>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">pyDeid</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#pydeid"><code class="docutils literal notranslate"><span class="pre">PyDeid</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/index.html">Tutorials</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">pyDeid</a></li>
      <li>Next: <a href="api/index.html" title="next chapter">API Reference</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2024, GEMINI.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/readme.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>