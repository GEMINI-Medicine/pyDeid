<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Installation &#8212; pyDeid v0.0.4 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=039e1c02" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=0fc64e82"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this heading">¶</a></h1>
<p># <cite>PyDeid</cite></p>
<p>## 1 Objective</p>
<p><cite>PyDeid</cite> is a Python-based refactor of the [Physionet Perl-based De-identification Software](<a class="reference external" href="https://physionet.org/content/deid/1.1/">https://physionet.org/content/deid/1.1/</a>), which uses regular expressions and lookup dictionaries to identify and replace PHI in free text.</p>
<p>The purpose was to create a faster, and easier to use process to de-identify large volumes of (large) clinical notes. <cite>PyDeid</cite> is up to 5.4x faster than the perl-based software, and requires no pre or post processing. Additional enhancements include the ability to re-identify text, supply custom patterns, and supply custom doctor and patient namelists without having to save them to persistent storage.</p>
<p>## 2 Local Installation and Setup</p>
<p>If you have downloaded (and unzipped) this package to a local folder <cite>/path/to/package/</cite> simply install via <cite>pip3 install –user /path/to/package/</cite>.</p>
<p>Note that if you are connected through VPN to your institution’s network you may need to run the command with the following options: <cite>pip3 install –trusted-host pypi.org –trusted-host pypi.python.org –trusted-host files.pythonhosted.org –user /path/to/package/</cite>.</p>
<p>Dependencies can be installed with <cite>pip3 install –trusted-host pypi.org –trusted-host pypi.python.org –trusted-host files.pythonhosted.org -r /path/to/requirements.txt/</cite>.</p>
<p>&gt; <em>Note</em>: You may encounter a deprecation warning about building local packages in place without first copying to a temporary directory in a future version of <cite>pip</cite>. Note that <cite>pyDeid</cite> has been tested with this change and the installation will continue to work when this behaviour becomes the default.</p>
<p>To now import from this package, you may need to add the install location (found via <cite>pip show pyDeid</cite>) to your <cite>$PYTHONPATH</cite> so <cite>Python</cite> knows where to look for it:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">import</span> <span class="pre">sys</span>
<span class="pre">sys.path.append('/path/from/pip_show_pydeid/')</span>
<span class="pre">`</span></code></p>
<p>Test your installation by running the following:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">from</span> <span class="pre">pyDeid</span> <span class="pre">import</span> <span class="pre">deid_string</span>
<span class="pre">deid_string('Justin</span> <span class="pre">Bieber</span> <span class="pre">was</span> <span class="pre">born</span> <span class="pre">on</span> <span class="pre">March</span> <span class="pre">1st,</span> <span class="pre">1994.')</span>
<span class="pre">`</span></code></p>
<p>## 4 De-identification Process</p>
<p><cite>PyDeid</cite> only requires that the free text data be stored in a CSV file with named column headers.</p>
<p>Specifying a column of encounter IDs (and optionally note IDs) with <cite>encounter_id_varname</cite> and <cite>note_id_varname</cite> respectively is relevant in only to assign the found PHI to a particular encounter and note identifier for further analysis. <cite>encounter_id_varname</cite> is required only when <cite>phi_output_file_type</cite> is <cite>json</cite>.</p>
<p>There may be multiple columns containing free text, but <cite>PyDeid</cite> will only de-identify a single column at a time. In order to de-identify multiple columns of text, make multiple passes of the same file with <cite>PyDeid</cite>.</p>
<p>To de-identify a file with default settings, simply do:</p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a>`
from pyDeid import pyDeid</p>
<dl class="simple">
<dt>pyDeid(</dt><dd><p>original_file = ‘test.csv’,
note_varname = ‘note_text’,
encounter_id_varname = ‘genc_id’,
note_id_varname = ‘note_id’</p>
</dd>
</dl>
<section id="id3">
<h2>)<a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h2>
<p><cite>test.csv</cite> may look like this (and is provided under the <cite>tests/</cite> directory of the package):</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">genc_id,note_id,note_text</span>
<span class="pre">1,Record</span> <span class="pre">1,Justin</span> <span class="pre">Bieber</span> <span class="pre">was</span> <span class="pre">born</span> <span class="pre">on</span> <span class="pre">March</span> <span class="pre">1st,</span> <span class="pre">1994.</span>
<span class="pre">2,Record</span> <span class="pre">2,&quot;St.Michael's</span> <span class="pre">hospital</span> <span class="pre">is</span> <span class="pre">located</span> <span class="pre">at</span> <span class="pre">30</span> <span class="pre">Bond</span> <span class="pre">St,</span> <span class="pre">Toronto,</span> <span class="pre">ON,</span> <span class="pre">M5B</span> <span class="pre">1W8</span>
<span class="pre">&quot;</span>
<span class="pre">3,Record</span> <span class="pre">3,Test</span> <span class="pre">MRN:</span> <span class="pre">011-0111</span>
<span class="pre">`</span></code></p>
<p>Additional settings are described in the function docstring. A file name for the de-identified csv can be supplied with new_file, or will take the form <cite>&lt;original file name&gt;__DE-IDENTIFIED.csv</cite>.</p>
<p>The PHI output can be stored as a <cite>json</cite> or <cite>csv</cite> file (specified by the <cite>phi_output_file_type</cite> parameter), and optionally the file name can be provided using the <cite>phi_output_file</cite> parameter. The <cite>json</cite> data structure is more efficient on space, but is much heavier on memory. The <cite>csv</cite> data structure is inefficient on space but much lighter on memory.</p>
<p>Additionally, there is a <cite>verbose</cite> mode which displays a progress bar and prints speed diagnostics at the end of the run.</p>
<p>One of the main advantages of <cite>PyDeid</cite> over <cite>GEMINI De-id v2</cite> is the ability to supply a set of doctor and patient first and last names to be recognized as PHI, without having to store this sensitive information to persistent storage. MLLs can be read into memory from zone1 into a python Set and supplied to <cite>PyDeid</cite> through the <cite>custom_dr_first_names</cite>, <cite>custom_dr_last_names</cite>, <cite>custom_patient_first_names</cite>, and <cite>custom_patient_last_names</cite> parameters for better recall and precision.</p>
<p>Additionally, <cite>PyDeid</cite> allows custom regexes for site-specific PHI to be supplied through keyword arguments. Simply supply a named regex argument to <cite>PyDeid</cite> or <cite>deid_string</cite> like so:</p>
<p><a href="#id4"><span class="problematic" id="id5">``</span></a>`
deid_string(</p>
<blockquote>
<div><p>‘The site-specific identifier at your hospital is NH12345’,
site_identifier = ‘NHd{5}’</p>
</div></blockquote>
</section>
<section id="id6">
<h2>)<a class="headerlink" href="#id6" title="Permalink to this heading">¶</a></h2>
<p><cite>deid_string</cite> is a simplified function to de-identify a single string at a time which can be used for debugging, or written into a custom wrapper if <cite>PyDeid</cite> fails to meet the requirements of the problem. It can optionally be combined with the <cite>reid_string</cite> function which takes the output of <cite>deid_string</cite> and returns the input to <cite>deid_string</cite>:</p>
<p><a href="#id7"><span class="problematic" id="id8">``</span></a>`
original_string = ‘Justin Bieber was born in Stratford on March 1st, 1994.’</p>
<p>phi, new_string = deid_string(original_string)
reidentified_string = reid_string(new_string, phi)</p>
<p>print(original_string == reidentified_string)
<a href="#id9"><span class="problematic" id="id10">``</span></a><a href="#id11"><span class="problematic" id="id12">`</span></a></p>
<p>## 5 Reporting Issues</p>
<p>Please report any bugs or feature requests as issues to the <cite>PyDeid</cite> repository. For any bugs, please supply a minimal reproducible example to guarantee a quicker resolution.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">pyDeid</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2024, GEMINI.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../_sources/source/setup.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>